-- Takes care of defining where certain supplies are in the pack

local packMap = {}

function define(name, indexArray)
	packMap[name] = indexArray
end

function remaining(name)
	if(packMap[name]) then
		local count = 0
		for i = 1, #(packMap[name]) do
			count = count + turtle.getItemCount(packMap[name][i])
		end
		return count
	else
		return 0
	end
end

function emptyCount()
    local empty = 0
    for i=1,16 do
        if turtle.getItemCount(i) == 0 then
            empty = empty + 1
        end
    end
    return empty
end

function drop(name)
	if(packMap[name]) then
--		local count = 0
		for i = 1, #(packMap[name]) do
            turtle.select(packMap[name][i])
            turtle.drop()
		end
--		return count
--	else
--		return 0
	end
end

function dropAll()
--    local count = 0
    for i=1,16 do
        turtle.select(i)
        turtle.drop()
    end
--    return count
end

function select(name)
    local firstSlot;
	if(packMap[name]) then
		if(remaining(name)) then
			for i = 1, #(packMap[name]) do
				if (turtle.getItemCount(packMap[name][i]) > 0) then
                    if(firstSlot == nil) then
                        firstSlot = i;
                    else
					    turtle.select(packMap[name][i]);
                        turtle.transferTo(firstSlot);
                    end
				end
			end
			turtle.select(packMap[name][firstSlot]);
		else
			print("Out of " .. name)
		end
	end
end
